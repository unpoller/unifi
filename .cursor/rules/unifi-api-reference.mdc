---
description: UniFi API reference - local controller and remote Site Manager APIs
alwaysApply: true
---

# UniFi API Reference

This library uses **two different UniFi APIs**:

## Local UniFi Controller API (Primary)

**Base URL**: Your controller URL (e.g., `https://192.168.1.1:8443`)

**Authentication**:
- Cookie-based: POST to `/api/login` with `{"username":"...","password":"..."}` (standard controllers)
- UDM Pro/UCG Max: `/api/auth/login` endpoint
- Session cookie returned and reused for subsequent requests
- Alternative: API key via `X-API-Key` header (newer controllers)

**Endpoint pattern**: `/api/s/{site}/...` where `{site}` is typically `"default"`

**UDM Pro difference**: All endpoints must be prefixed with `/proxy/network` (e.g., `/proxy/network/api/s/default/stat/device`)

**Response format**: `{"data": [...], "meta": {"rc": "ok"}}`. Errors: `{"data": [], "meta": {"msg": "api.err.LoginRequired", "rc": "error"}}`. Large datasets may include `"meta": {"count": 4818, "rc": "ok"}` when truncated.

**Key endpoints** (see `types.go` constants):
- `/api/s/{site}/stat/device` - Devices (UAPs, USWs, USGs, UDMs, UXGs, PDUs, UBBs, UCIs)
- `/api/s/{site}/stat/sta` - Active clients
- `/api/s/{site}/stat/event` - Events (3000 limit)
- `/api/s/{site}/list/alarm` - Alarms
- `/api/s/{site}/stat/stadpi` - Client DPI stats
- `/api/s/{site}/stat/sitedpi` - Site DPI stats
- `/api/s/{site}/stat/anomalies` - Anomalies
- `/api/stat/sites` - List all sites
- `/v2/api/site/{site}/system-log/all` - System logs (v2)
- `/v2/api/site/{site}/traffic?...` - Traffic stats (v2)

**References**: [Ubiquiti Community Wiki](https://ubntwiki.com/products/software/unifi-controller/api)

## Remote Site Manager API (Cloud)

**Base URL**: `https://api.ui.com/v1/`

**Authentication**: API key in `X-API-Key` header. Obtain from unifi.ui.com → Settings → API Keys (EA) or API section (GA). Currently **read-only**.

**Rate limits**:
- Early Access (EA): 100 requests/minute
- v1 stable: 10,000 requests/minute
- Exceeding returns `429 Too Many Requests` with `Retry-After` header

**Key endpoints**:
- `GET /v1/hosts` - List consoles/hosts
- `GET /v1/hosts/{id}` - Get host by ID
- `GET /v1/sites` - List sites (via console)

**Implementation**: See `remote.go` (`RemoteAPIClient`). Used for discovering consoles and sites managed via UniFi Site Manager (cloud).

**References**: [UniFi Developer Docs](https://developer.ui.com/site-manager/v1.0.0/gettingstarted)
