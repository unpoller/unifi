---
description: Unifi Go library project overview and design
alwaysApply: true
---

# Unifi Go Library – Project Overview

This repo is **github.com/unpoller/unifi/v5**: a Go library that connects to a Ubiquiti UniFi controller and **pulls** data (clients, devices, sites, alarms, events, etc.). It does **not** update or change controller settings by design.

- **Entry point**: `unifi.NewUnifi(config *Config)` → authenticated `*Unifi` client.
- **Config**: `Config` has `URL`, `User`, `Pass`, optional `APIKey`, `ErrorLog`/`DebugLog`, `SSLCert`, `VerifySSL`.
- **Package layout**: Single package `unifi` for core logic. `main/` for CLI. `mocks/` implements `UnifiClient` for testing.
- **UnifiClient**: Interface in `types.go`; both `*Unifi` and `mocks.MockUnifi` implement it. Use it for dependency injection.
- **Remote API**: `remote.go` provides `RemoteAPIClient` for Ubiquiti’s cloud API (different auth, base URL).

## Library usage

Typical flow: `Config` → `NewUnifi(config)` → `GetSites()` → `GetClients(sites)` / `GetDevices(sites)`. Optionally `GetAlarms`, `GetEvents`, `GetAnomalies`, etc. See `README.md` for a full example.

- **Returns**: `[]*Site`, `[]*Client`, `*Devices` (with `UAPs`, `USWs`, `USGs`, `UDMs`, `UXGs`, `PDUs`, `UBBs`, `UCIs`), plus alarms, events, DPI, traffic. Data is unmarshaled into large structs for consumption; some types have InfluxDB datapoint helpers.
- **Import**: `github.com/unpoller/unifi/v5`. Logger interface: `ErrorLog` / `DebugLog` accept `(format, args...)`; use `log.Printf` or custom.

When adding features: follow existing patterns (e.g. `GetDevices` / `GetClients`), use `GetData` for HTTP, and add tests. Run `golangci-lint` and tests before committing.
